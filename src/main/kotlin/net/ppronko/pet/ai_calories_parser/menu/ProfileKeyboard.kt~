package net.ppronko.pet.ai_calories_parser.menu

import net.ppronko.pet.ai_calories_parser.data.Gender
import net.ppronko.pet.ai_calories_parser.data.entity.TelegramUserProfile
import org.telegram.telegrambots.meta.api.objects.replykeyboard.InlineKeyboardMarkup
import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.InlineKeyboardButton

object ProfileKeyboard {

    const val EDIT_GENDER = "profile_edit_gender"
    const val EDIT_AGE = "profile_edit_age"
    const val EDIT_WEIGHT = "profile_edit_weight"
    const val EDIT_HEIGHT = "profile_edit_height"
    const val EDIT_ACTIVITY = "profile_edit_activity"
    const val TOGGLE_AUTO_GOALS = "profile_toggle_auto"
    const val SET_MANUAL_GOALS = "profile_set_manual_goals"

    /**
     * –°–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è,
     * –æ—Ç–æ–±—Ä–∞–∂–∞—è —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö.
     * @param profile –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
     */
    fun create(profile: TelegramUserProfile): InlineKeyboardMarkup {
        val genderText = "–ü–æ–ª: ${if (profile.gender == Gender.MALE) "–ú—É–∂—Å–∫–æ–π üöª" else "–ñ–µ–Ω—Å–∫–∏–π üö∫"}"
        val ageText = "–í–æ–∑—Ä–∞—Å—Ç: ${profile.age}"
        val weightText = "–í–µ—Å: ${profile.weight} –∫–≥"
        val heightText = "–†–æ—Å—Ç: ${profile.height} —Å–º"
        val autoGoalsText = if (profile.areGoalsAutomatic) "üéØ –†–µ–∂–∏–º: –ê–≤—Ç–æ" else "üéØ –†–µ–∂–∏–º: –†—É—á–Ω–æ–π"

        val row1 = listOf(
            InlineKeyboardButton.builder().text(genderText).callbackData(EDIT_GENDER).build(),
            InlineKeyboardButton.builder().text(ageText).callbackData(EDIT_AGE).build()
        )
        val row2 = listOf(
            InlineKeyboardButton.builder().text(weightText).callbackData(EDIT_WEIGHT).build(),
            InlineKeyboardButton.builder().text(heightText).callbackData(EDIT_HEIGHT).build()
        )
        val row3 = listOf(
            InlineKeyboardButton.builder().text("üèÉ –û–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏").callbackData(EDIT_ACTIVITY).build()
        )
        val row4 = listOf(
            InlineKeyboardButton.builder().text(autoGoalsText).callbackData(TOGGLE_AUTO_GOALS).build()
        )

        val row5 = mutableListOf<InlineKeyboardButton>()
        if (!profile.areGoalsAutomatic) {
            row5.add(
                InlineKeyboardButton.builder()
                    .text("‚úçÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–∏ –≤—Ä—É—á–Ω—É—é")
                    .callbackData(SET_MANUAL_GOALS)
                    .build()
            )
        }

        return InlineKeyboardMarkup.builder()
            .keyboardRow(row1)
            .keyboardRow(row2)
            .keyboardRow(row3)
            .keyboardRow(row4)
            .build()
    }
}